<div class="container mt-4">
    <!-- Form Section -->
    <div class="card mb-4" *ngIf="showForm">
        <div class="card-header">
            <h4>{{ submitType }} Reservation</h4>
        </div>
        <div class="card-body">
            <form [formGroup]="reservationForm" (ngSubmit)="onSave()">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Reservation Information</h5>
                    </div>
                    <div class="card-body">
                        <!-- Number of Adults -->
                        <div class="form-group row">
                            <label for="numberOfAdults" class="col-sm-3 col-form-label">Number of Adults</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfAdults" formControlName="numberOfAdults"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('numberOfAdults')!.invalid && reservationForm.get('numberOfAdults')!.touched"
                                    class="text-danger">
                                    Number of Adults is required.
                                </div>
                            </div>
                        </div>

                        <!-- Number of Children -->
                        <div class="form-group row">
                            <label for="numberOfChildren" class="col-sm-3 col-form-label">Number of
                                Children</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfChildren" formControlName="numberOfChildren"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('numberOfChildren')!.invalid && reservationForm.get('numberOfChildren')!.touched"
                                    class="text-danger">
                                    Number of Children is required.
                                </div>
                            </div>
                        </div>

                        <!-- Day -->
                        <div class="form-group row">
                            <label for="day" class="col-sm-3 col-form-label">Day</label>
                            <div class="col-sm-9">
                                <input type="text" id="day" formControlName="day" class="form-control" />
                                <div *ngIf="reservationForm.get('day')!.invalid && reservationForm.get('day')!.touched"
                                    class="text-danger">
                                    Day is required and should be a maximum of 10 characters.
                                </div>
                            </div>
                        </div>

                        <!-- Check-In Date -->
                        <div class="form-group row">
                            <label for="checkInDate" class="col-sm-3 col-form-label">Check-In Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="checkInDate" formControlName="checkInDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('checkInDate')!.invalid && reservationForm.get('checkInDate')!.touched"
                                    class="text-danger">
                                    Check-In Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Check-Out Date -->
                        <div class="form-group row">
                            <label for="checkOutDate" class="col-sm-3 col-form-label">Check-Out Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="checkOutDate" formControlName="checkOutDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('checkOutDate')!.invalid && reservationForm.get('checkOutDate')!.touched"
                                    class="text-danger">
                                    Check-Out Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Number of Nights -->
                        <div class="form-group row">
                            <label for="numberOfNights" class="col-sm-3 col-form-label">Number of Nights</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfNights" formControlName="numberOfNights"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('numberOfNights')!.invalid && reservationForm.get('numberOfNights')!.touched"
                                    class="text-danger">
                                    Number of Nights is required.
                                </div>
                            </div>
                        </div>

                        <!-- Status -->
                        <div class="form-group row">
                            <label for="status" class="col-sm-3 col-form-label">Status</label>
                            <div class="col-sm-9">
                                <input type="text" id="status" formControlName="status" class="form-control" />
                                <div *ngIf="reservationForm.get('status')!.invalid && reservationForm.get('status')!.touched"
                                    class="text-danger">
                                    Status is required and should be a maximum of 20 characters.
                                </div>
                            </div>
                        </div>

                        <!-- Room Selection -->
                        <div class="form-group row">
                            <label for="roomId" class="col-sm-3 col-form-label">Room</label>
                            <div class="col-sm-9">
                                <select id="roomId" formControlName="roomId" class="form-control">
                                    <option *ngFor="let room of rooms" [value]="room.roomId">{{ room.roomNumber
                                        }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rate Section -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Rate Information</h5>
                    </div>
                    <div class="card-body">
                        <!-- Day -->
                        <div class="form-group row">
                            <label for="rateDay" class="col-sm-3 col-form-label">Day</label>
                            <div class="col-sm-9">
                                <input type="text" id="rateDay" formControlName="rate.day" class="form-control" />
                                <div *ngIf="reservationForm.get('rate.day')!.invalid && reservationForm.get('rate.day')!.touched"
                                    class="text-danger">
                                    Day is required and should be a maximum of 10 characters.
                                </div>
                            </div>
                        </div>

                        <!-- Check-In Date -->
                        <div class="form-group row">
                            <label for="rateCheckInDate" class="col-sm-3 col-form-label">Check-In Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="rateCheckInDate" formControlName="rate.checkInDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('rate.checkInDate')!.invalid && reservationForm.get('rate.checkInDate')!.touched"
                                    class="text-danger">
                                    Check-In Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Check-Out Date -->
                        <div class="form-group row">
                            <label for="rateCheckOutDate" class="col-sm-3 col-form-label">Check-Out Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="rateCheckOutDate" formControlName="rate.checkOutDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('rate.checkOutDate')!.invalid && reservationForm.get('rate.checkOutDate')!.touched"
                                    class="text-danger">
                                    Check-Out Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Number of Guests -->
                        <div class="form-group row">
                            <label for="numberOfGuests" class="col-sm-3 col-form-label">Number of Guests</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfGuests" formControlName="rate.numberOfGuests"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('rate.numberOfGuests')!.invalid && reservationForm.get('rate.numberOfGuests')!.touched"
                                    class="text-danger">
                                    Number of Guests is required.
                                </div>
                            </div>
                        </div>

                        <!-- Per Night Charges -->
                        <div class="form-group row">
                            <label for="ratePerNightCharges" class="col-sm-3 col-form-label">Per Night
                                Charges</label>
                            <div class="col-sm-9">
                                <input type="number" id="ratePerNightCharges" formControlName="rate.perNightCharges"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('rate.perNightCharges')!.invalid && reservationForm.get('rate.perNightCharges')!.touched"
                                    class="text-danger">
                                    Per Night Charges are required.
                                </div>
                            </div>
                        </div>

                        <!-- Total Charges -->
                        <div class="form-group row">
                            <label for="rateTotalCharges" class="col-sm-3 col-form-label">Total Charges</label>
                            <div class="col-sm-9">
                                <input type="number" id="rateTotalCharges" formControlName="rate.totalCharges"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('rate.totalCharges')!.invalid && reservationForm.get('rate.totalCharges')!.touched"
                                    class="text-danger">
                                    Total Charges are required.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Section -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Payment Information</h5>
                    </div>
                    <div class="card-body">
                        <!-- Payment Id -->
                        <div class="form-group row">
                            <label for="paymentId" class="col-sm-3 col-form-label">Payment ID</label>
                            <div class="col-sm-9">
                                <input type="text" id="paymentId" formControlName="payment.paymentId"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('payment.paymentId')!.invalid && reservationForm.get('payment.paymentId')!.touched"
                                    class="text-danger">
                                    Payment ID is required.
                                </div>
                            </div>
                        </div>

                        <!-- Payment Amount -->
                        <div class="form-group row">
                            <label for="paymentAmount" class="col-sm-3 col-form-label">Payment Amount</label>
                            <div class="col-sm-9">
                                <input type="number" id="paymentAmount" formControlName="payment.paymentAmount"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('payment.paymentAmount')!.invalid && reservationForm.get('payment.paymentAmount')!.touched"
                                    class="text-danger">
                                    Payment Amount is required.
                                </div>
                            </div>
                        </div>

                        <!-- Payment Date -->
                        <div class="form-group row">
                            <label for="paymentDate" class="col-sm-3 col-form-label">Payment Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="paymentDate" formControlName="payment.paymentDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('payment.paymentDate')!.invalid && reservationForm.get('payment.paymentDate')!.touched"
                                    class="text-danger">
                                    Payment Date is required.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bill Section -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Bill Information</h5>
                    </div>
                    <div class="card-body">
                        <!-- Bill Id -->
                        <div class="form-group row">
                            <label for="billId" class="col-sm-3 col-form-label">Bill ID</label>
                            <div class="col-sm-9">
                                <input type="text" id="billId" formControlName="bill.billId" class="form-control" />
                                <div *ngIf="reservationForm.get('bill.billId')!.invalid && reservationForm.get('bill.billId')!.touched"
                                    class="text-danger">
                                    Bill ID is required.
                                </div>
                            </div>
                        </div>

                        <!-- Bill Amount -->
                        <div class="form-group row">
                            <label for="billAmount" class="col-sm-3 col-form-label">Bill Amount</label>
                            <div class="col-sm-9">
                                <input type="number" id="billAmount" formControlName="bill.billAmount"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('bill.billAmount')!.invalid && reservationForm.get('bill.billAmount')!.touched"
                                    class="text-danger">
                                    Bill Amount is required.
                                </div>
                            </div>
                        </div>

                        <!-- Bill Date -->
                        <div class="form-group row">
                            <label for="billDate" class="col-sm-3 col-form-label">Bill Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="billDate" formControlName="bill.billDate" class="form-control" />
                                <div *ngIf="reservationForm.get('bill.billDate')!.invalid && reservationForm.get('bill.billDate')!.touched"
                                    class="text-danger">
                                    Bill Date is required.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-3">
                    <button type="submit" class="btn btn-success me-2" [disabled]="reservationForm.invalid">{{
                        submitType }}</button>
                    <button type="button" class="btn btn-secondary me-2" (click)="onCancel()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- List View Section -->
    <div class="card mb-4">
        <div class="card-header">
            <button class="btn btn-primary" (click)="onNew()">New Reservation</button>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Number of Adults</th>
                        <th>Number of Children</th>
                        <th>Day</th>
                        <th>Check-In Date</th>
                        <th>Check-Out Date</th>
                        <th>Number of Nights</th>
                        <th>Status</th>
                        <!-- Example: Include related columns like RoomId, RateId, PaymentId, BillId -->
                        <!-- <th>Room</th> -->
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reservation of reservations; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ reservation.numberOfAdults }}</td>
                        <td>{{ reservation.numberOfChildren }}</td>
                        <td>{{ reservation.day }}</td>
                        <td>{{ reservation.checkInDate | date }}</td>
                        <td>{{ reservation.checkOutDate | date }}</td>
                        <td>{{ reservation.numberOfNights }}</td>
                        <td>{{ reservation.status }}</td>
                        <!-- Example: Display related data like Room number -->
                        <!-- <td>{{ reservation.room?.roomNumber }}</td> -->
                        <td>
                            <button class="btn btn-info me-2" (click)="onEdit(reservation)">Edit</button>
                            <button class="btn btn-danger me-2"
                                (click)="onDelete(reservation.reservationId)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>