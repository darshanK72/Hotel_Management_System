<div class="container-fluid mt-4 px-3">
    <!-- Form Section -->
    <div class="card mb-4" *ngIf="showForm">
        <div class="card-header">
            <h4>{{ submitType }} Reservation</h4>
        </div>
        <div class="card-body">
            <form [formGroup]="reservationForm" (ngSubmit)="onSave()">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Reservation Information</h5>
                    </div>
                    <div>
                        <p class="text-center text-danger" *ngIf="isServerError">{{errorMessage}}</p>
                    </div>  
                    <div class="card-body">
                        <!-- Number of Adults -->
                        <div class="form-group row my-2">
                            <label for="numberOfAdults" class="col-sm-3 col-form-label">Number of Adults</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfAdults" formControlName="numberOfAdults"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('numberOfAdults')!.invalid && reservationForm.get('numberOfAdults')!.touched"
                                    class="text-danger">
                                    Number of Adults is required.
                                </div>
                            </div>
                        </div>

                        <!-- Number of Children -->
                        <div class="form-group row my-2">
                            <label for="numberOfChildren" class="col-sm-3 col-form-label">Number of
                                Children</label>
                            <div class="col-sm-9">
                                <input type="number" id="numberOfChildren" formControlName="numberOfChildren"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('numberOfChildren')!.invalid && reservationForm.get('numberOfChildren')!.touched"
                                    class="text-danger">
                                    Number of Children is required.
                                </div>
                            </div>
                        </div>

                        <!-- Check-In Date -->
                        <div class="form-group row my-2">
                            <label for="checkInDate" class="col-sm-3 col-form-label">Check-In Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="checkInDate" formControlName="checkInDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('checkInDate')!.invalid && reservationForm.get('checkInDate')!.touched"
                                    class="text-danger">
                                    Check-In Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Check-Out Date -->
                        <div class="form-group row my-2">
                            <label for="checkOutDate" class="col-sm-3 col-form-label">Check-Out Date</label>
                            <div class="col-sm-9">
                                <input type="date" id="checkOutDate" formControlName="checkOutDate"
                                    class="form-control" />
                                <div *ngIf="reservationForm.get('checkOutDate')!.invalid && reservationForm.get('checkOutDate')!.touched"
                                    class="text-danger">
                                    Check-Out Date is required.
                                </div>
                            </div>
                        </div>

                        <!-- Room Selection -->
                        <div class="form-group row my-2">
                            <label for="roomId" class="col-sm-3 col-form-label">Room</label>
                            <div class="col-sm-9">
                                <select id="roomId" formControlName="roomId" class="form-control">
                                    <option *ngFor="let room of rooms" [value]="room.roomId">{{ room.roomNumber
                                        }}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Guest Selection -->
                        <div class="form-group row my-2">
                            <label for="guestId" class="col-sm-3 col-form-label">Guest</label>
                            <div class="col-sm-9">
                                <select id="guestId" formControlName="guestId" class="form-control">
                                    <option *ngFor="let guest of guests" [value]="guest.guestId">{{guest.guestId}} -
                                        {{guest.name}} - {{guest.email}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-3">
                    <button type="submit" class="btn btn-success me-2" [disabled]="reservationForm.invalid">{{
                        submitType }}</button>
                    <button type="button" class="btn btn-secondary me-2" (click)="onCancel()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- List View Section -->
    <div class="card mb-4">
        <div class="card-header">
            <button class="btn btn-primary" (click)="onNew()">New Reservation</button>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Number of Adults</th>
                        <th>Number of Children</th>
                        <th>Day</th>
                        <th>Check-In Date</th>
                        <th>Check-Out Date</th>
                        <th>Number of Nights</th>
                        <th>Status</th>
                        <th>Room</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reservation of reservations; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ reservation.numberOfAdults }}</td>
                        <td>{{ reservation.numberOfChildren }}</td>
                        <td>{{ reservation.day }}</td>
                        <td>{{ reservation.checkInDate | date }}</td>
                        <td>{{ reservation.checkOutDate | date }}</td>
                        <td>{{ reservation.numberOfNights }}</td>
                        <td>{{ reservation.status }}</td>
                        <td>{{ reservation.room?.roomNumber }}</td>
                        <td></td>
                        <td>
                            <button class="btn btn-info me-2" (click)="onEdit(reservation)">Edit</button>
                            <!-- <button class="btn btn-danger me-2"
                                (click)="onDelete(reservation.reservationId)">Delete</button> -->
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>